<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<HEAD>
   <TITLE>Chapter 7 Notes</TITLE>
<link href="../../styles/cs325.css" rel="stylesheet" type="text/css">
</HEAD>
<BODY>
<DIV ID="logo">
<A CLASS="plain" HREF="../../index.html" target=_top>
<IMG SRC="../../images/cs325logo.gif" ALT="CS 325 Logo" BORDER="0"></A>
</DIV>
<DIV ID="banner">Chapter 7 Notes</DIV>

<H3>Page 121</H3>

<P>Once you understand the semantics of <CODE>open</CODE> and
<CODE>close</CODE>, forget about them. Always use
<CODE>with-open-file</CODE>.</P>

<P>Also, be aware that the <CODE>read-line</CODE> example at the
bottom of the page may behave differently in different
implementations. In some, the <CODE>read-line</CODE> will see the
return following the expression you just entered and return an empty
string, after which Lisp will see the "<CODE>Please enter ...</CODE>"
and complain that <CODE>Please</CODE> is an unbound variable.</P>

<H3>Page 122</H3>

<P>In case you're curious, the name <CODE>pseudo-cat</CODE> comes
from the Unix shell function <CODE>cat</CODE>, which is commonly used
to print files to the screen. Why <CODE>cat</CODE>? It's short for
"catenate" (not "concatenate," as Antonio Leitao correctly pointed
out to me). <CODE>cat</CODE> was designed to concatenate files. Unix designers
like short names, not clear ones.</P>

<P>What does concatenation have to do with printing? First, in Unix,
by default, all shell commands send the output to the screen. Second,
by a not unreasonable extension, if you concatenate a file to
nothing, you get the file. Unix designers like reusing existing
commands, even if the semantics is unintuitive, so concatenating a
file to nothing became the standard way to print the file to the
screen.</P>

<P>Warning: Don't use a flag like <CODE>EOF</CODE> to signal
the end of file
value with the Lisp <code>read</code> function. If the input file has the
symbol <code>EOF</code> in it, your function will be
fooled into thinking the file has ended. See Exercise 2 of this chapter.
This confusion can't happen
with <CODE>read-line</CODE> or <CODE>read-char</CODE> because they
return strings or characters, not symbols.</P>

<H3>Page 123</H3>

<P>Warning: The fact that <CODE>read-from-string</CODE> takes both
optional and keyword arguments causes strange things to happen when
you want the latter and not the former. See page 293.</P>

<H3>Page 124</H3>

<P>Though <CODE>(format nil ...)</CODE> is a very useful method for
constructing strings, be aware that it's not printing, it's building
a string. Use <CODE>(format t ...)</CODE> for printing, or
<CODE>(format stream ...)</CODE> if you have a stream variable
connected to a file.</P>

<P>There's a lot more about <code>format</code> in the Glossary
at the back of the book. And if that's not enough, check
out <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3.html">the material</a>
at <a href="http://www.lisp.org/HyperSpec/FrontMatter/index.html">the Common Lisp Hyperspec</a>.</P>

<P>Also, in general, use <code>~S</code> for all debugging output. 
<code>~A</code> will
sometimes hide information critical to debugging an errant function,
such as what package a symbol is coming from.</P>

<H3>Page 126</H3>

<P>You could also implement the circular buffer with a circular list.
See page 208.</P>

<HR>

<P ID="closing">Comments? <IMG SRC="../../images/comments.gif"
ALIGN=bottom> Send mail to <A HREF="mailto:riesbeck@cs.northwestern.edu">Chris
Riesbeck</A>.</P>

</BODY>
</HTML>